{"ast":null,"code":"var _jsxFileName = \"/Users/charanraj/Documents/Workspace/cropDamageFront/src/login.js\";\nimport React, { Component } from 'react';\nimport TextField from 'material-ui/TextField';\nimport Paper from 'material-ui/Paper';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport KissanNumber from './constants/kissanNumbers';\nimport { ToastContainer, toast } from 'react-toastify';\nimport web3 from './web3';\nimport contract from './contract';\nimport 'react-toastify/dist/ReactToastify.css';\nimport _ from 'lodash';\nimport { withRouter } from 'react-router-dom';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.notify = async () => {\n      const hasValue = KissanNumber.filter(word => word == this.state.kissanNum);\n\n      if (hasValue.length > 0) {\n        try {\n          localStorage.setItem('policyNumber', this.state.kissanNum);\n          const accounts = await web3.eth.getAccounts();\n          const sen = await contract.methods.verifyFarmer(this.state.kissanNum).call({\n            from: accounts[0]\n          }, (err, res) => console.log(err));\n\n          if (sen === '0x0000000000000000000000000000000000000000' || sen == null) {\n            toast.error(\"Please register in contract, Not registered!!\");\n            this.setState({\n              registerUser: true\n            });\n          } else {\n            toast.success(\"Valid User\");\n          } //const manager = await contract.events.CallForRegister({fromBlock: 0, toBlock: 'latest'},(err, evet) => console.log(evet));\n          // this.setState({\n          //   manager: manager\n          // });\n\n        } catch (err) {\n          console.log(err);\n        }\n      } else {\n        this.setState({\n          registerUser: false\n        });\n        toast.error(\"Invalid kissan number, please try again!!\");\n      }\n    };\n\n    this.getKissanNumber = e => {\n      this.setState({\n        kissanNum: e.target.value\n      });\n    };\n\n    this.state = {\n      kissanNum: '',\n      registerUser: false,\n      accounts: []\n    };\n  }\n\n  async componentDidMount() {\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      accounts: accounts\n    });\n  }\n\n  render() {\n    return React.createElement(Paper, {\n      className: \"loginContianer\",\n      zDepth: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, this.state.accounts.length === 0 && 'Please login to meta mask account'), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, this.state.registerUser ? React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Please Register\") : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Please login \")), this.state.registerUser ? React.createElement(RaisedButton, {\n      onClick: () => this.props.history.push('/newFarmer'),\n      label: \"Register\",\n      primary: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }) : this.state.accounts.length !== 0 && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      onChange: this.getKissanNumber,\n      hintText: \"Enter your Kissan Number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(RaisedButton, {\n      onClick: this.notify,\n      label: \"Submit\",\n      primary: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    })), React.createElement(ToastContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }));\n  }\n\n}\n\n;\nexport default withRouter(Login);","map":{"version":3,"sources":["/Users/charanraj/Documents/Workspace/cropDamageFront/src/login.js"],"names":["React","Component","TextField","Paper","RaisedButton","KissanNumber","ToastContainer","toast","web3","contract","_","withRouter","Login","constructor","props","notify","hasValue","filter","word","state","kissanNum","length","localStorage","setItem","accounts","eth","getAccounts","sen","methods","verifyFarmer","call","from","err","res","console","log","error","setState","registerUser","success","getKissanNumber","e","target","value","componentDidMount","render","history","push"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAO,uCAAP;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AACA,MAAMC,KAAN,SAAoBX,SAApB,CAA8B;AAC1BY,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAenBC,MAfmB,GAeV,YAAY;AACjB,YAAMC,QAAQ,GAAGX,YAAY,CAACY,MAAb,CAAoBC,IAAI,IAAIA,IAAI,IAAI,KAAKC,KAAL,CAAWC,SAA/C,CAAjB;;AACA,UAAIJ,QAAQ,CAACK,MAAT,GAAkB,CAAtB,EAAyB;AACrB,YAAI;AACAC,UAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqC,KAAKJ,KAAL,CAAWC,SAAhD;AACA,gBAAMI,QAAQ,GAAG,MAAMhB,IAAI,CAACiB,GAAL,CAASC,WAAT,EAAvB;AACA,gBAAMC,GAAG,GAAG,MAAMlB,QAAQ,CAACmB,OAAT,CAAiBC,YAAjB,CAA8B,KAAKV,KAAL,CAAWC,SAAzC,EAAoDU,IAApD,CAAyD;AAACC,YAAAA,IAAI,EAAEP,QAAQ,CAAC,CAAD;AAAf,WAAzD,EAA8E,CAACQ,GAAD,EAAMC,GAAN,KAAcC,OAAO,CAACC,GAAR,CAAYH,GAAZ,CAA5F,CAAlB;;AACA,cAAIL,GAAG,KAAK,4CAAR,IAAwDA,GAAG,IAAI,IAAnE,EAAyE;AACrEpB,YAAAA,KAAK,CAAC6B,KAAN,CAAY,+CAAZ;AACA,iBAAKC,QAAL,CAAc;AACVC,cAAAA,YAAY,EAAE;AADJ,aAAd;AAIH,WAND,MAMO;AACH/B,YAAAA,KAAK,CAACgC,OAAN,CAAc,YAAd;AACH,WAZD,CAaA;AAEA;AACA;AACA;;AACH,SAlBD,CAkBE,OAAOP,GAAP,EAAY;AACVE,UAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACH;AACJ,OAtBD,MAuBK;AACD,aAAKK,QAAL,CAAc;AACVC,UAAAA,YAAY,EAAE;AADJ,SAAd;AAGA/B,QAAAA,KAAK,CAAC6B,KAAN,CAAY,2CAAZ;AACH;AAGJ,KAhDkB;;AAAA,SAiDnBI,eAjDmB,GAiDAC,CAAD,IAAO;AACrB,WAAKJ,QAAL,CAAc;AACVjB,QAAAA,SAAS,EAAEqB,CAAC,CAACC,MAAF,CAASC;AADV,OAAd;AAGH,KArDkB;;AAEf,SAAKxB,KAAL,GAAa;AACTC,MAAAA,SAAS,EAAE,EADF;AAETkB,MAAAA,YAAY,EAAE,KAFL;AAGTd,MAAAA,QAAQ,EAAE;AAHD,KAAb;AAKH;;AACD,QAAMoB,iBAAN,GAA2B;AAEvB,UAAMpB,QAAQ,GAAE,MAAMhB,IAAI,CAACiB,GAAL,CAASC,WAAT,EAAtB;AACA,SAAKW,QAAL,CAAc;AACVb,MAAAA,QAAQ,EAACA;AADC,KAAd;AAGH;;AAwCDqB,EAAAA,MAAM,GAAG;AACL,WACI,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAC,gBAAjB;AAAkC,MAAA,MAAM,EAAE,CAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAK1B,KAAL,CAAWK,QAAX,CAAoBH,MAApB,KAA+B,CAA/B,IAAoC,mCAAzC,CADQ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKF,KAAL,CAAWmB,YAAX,GAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAA1B,GAAyD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAA9D,CAFJ,EAGK,KAAKnB,KAAL,CAAWmB,YAAX,GAA0B,oBAAC,YAAD;AAAc,MAAA,OAAO,EAAE,MAAM,KAAKxB,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB,CAA7B;AAAoE,MAAA,KAAK,EAAC,UAA1E;AAAqF,MAAA,OAAO,EAAE,IAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA1B,GACD,KAAK5B,KAAL,CAAWK,QAAX,CAAoBH,MAApB,KAA+B,CAA/B,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,SAAD;AACQ,MAAA,QAAQ,EAAE,KAAKmB,eADvB;AAEQ,MAAA,QAAQ,EAAC,0BAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,EAKI,oBAAC,YAAD;AAAc,MAAA,OAAO,EAAE,KAAKzB,MAA5B;AAAoC,MAAA,KAAK,EAAC,QAA1C;AAAmD,MAAA,OAAO,EAAE,IAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,CALJ,EAaI,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbJ,CADJ;AAkBH;;AA1EyB;;AA2E7B;AACD,eAAeJ,UAAU,CAACC,KAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport TextField from 'material-ui/TextField';\nimport Paper from 'material-ui/Paper';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport KissanNumber from './constants/kissanNumbers';\nimport { ToastContainer, toast } from 'react-toastify';\nimport web3 from './web3';\nimport contract from './contract';\nimport 'react-toastify/dist/ReactToastify.css';\nimport _ from 'lodash';\nimport { withRouter } from 'react-router-dom'\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            kissanNum: '',\n            registerUser: false,\n            accounts: []\n        }\n    }\n    async componentDidMount () {\n        \n        const accounts =await web3.eth.getAccounts();\n        this.setState({\n            accounts:accounts\n        })\n    }\n    notify = async () => {\n        const hasValue = KissanNumber.filter(word => word == this.state.kissanNum);\n        if (hasValue.length > 0) {\n            try {\n                localStorage.setItem('policyNumber', this.state.kissanNum);\n                const accounts = await web3.eth.getAccounts();\n                const sen = await contract.methods.verifyFarmer(this.state.kissanNum).call({from: accounts[0]}, (err, res) => console.log(err));\n                if (sen === '0x0000000000000000000000000000000000000000' || sen == null) {\n                    toast.error(\"Please register in contract, Not registered!!\");\n                    this.setState({\n                        registerUser: true\n                    });\n                    \n                } else {\n                    toast.success(\"Valid User\");\n                }\n                //const manager = await contract.events.CallForRegister({fromBlock: 0, toBlock: 'latest'},(err, evet) => console.log(evet));\n\n                // this.setState({\n                //   manager: manager\n                // });\n            } catch (err) {\n                console.log(err);\n            }\n        }\n        else {\n            this.setState({\n                registerUser: false\n            });\n            toast.error(\"Invalid kissan number, please try again!!\");\n        }\n\n\n    }\n    getKissanNumber = (e) => {\n        this.setState({\n            kissanNum: e.target.value\n        });\n    }\n    render() {\n        return (\n            <Paper className=\"loginContianer\" zDepth={1}>\n    <h4>{this.state.accounts.length === 0 && 'Please login to meta mask account'}</h4>\n                <h3>{this.state.registerUser ? <span>Please Register</span> : <div>Please login </div>}</h3>\n                {this.state.registerUser ? <RaisedButton onClick={() => this.props.history.push('/newFarmer')} label=\"Register\" primary={true} />: \n                this.state.accounts.length !== 0 &&\n                <div>\n                <TextField\n                        onChange={this.getKissanNumber}\n                        hintText=\"Enter your Kissan Number\"\n                    />\n                    <RaisedButton onClick={this.notify} label=\"Submit\" primary={true} />\n                    </div>\n                }\n                <ToastContainer />\n\n            </Paper>\n        )\n    }\n};\nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}